<div id="did_figure_violent"></div>
<script type="text/javascript">
var spec = {'config': {'view': {'width': 400, 'height': 300}, 'axis': {'labelFontSize': 12, 'titleFontSize': 12}, 'legend': {'labelFontSize': 12, 'titleFontSize': 12}}, 'layer': [{'mark': {'type': 'line', 'clip': "True"}, 'encoding': {'color': {'type': 'nominal', 'field': 'block_status', 'sort': ['Treated', 'One over', 'Two over', 'Three over'], 'title': 'Block status'}, 'tooltip': {'type': 'quantitative', 'field': 'violent_count'}, 'x': {'type': 'quantitative', 'axis': {'format': '.1', 'title': 'School years before/after implementation of SP program', 'values': [-5, -4, -3, -2, -1, 0, 1, 2]}, 'field': 'run_var', 'scale': {'domain': [-5, 3]}}, 'y': {'type': 'quantitative', 'axis': {'title': 'Crime count per school year'}, 'field': 'violent_count'}}, 'transform': [{'filter': 'datum.run_var < 0'}]}, {'mark': {'type': 'line', 'clip': "True"}, 'encoding': {'color': {'type': 'nominal', 'field': 'block_status', 'legend': null, 'sort': ['Treated', 'One over', 'Two over', 'Three over']}, 'tooltip': {'type': 'quantitative', 'field': 'violent_count'}, 'x': {'type': 'quantitative', 'axis': {'format': '.1', 'title': 'School years before/after implementation of SP program', 'values': [-5, -4, -3, -2, -1, 0, 1, 2]}, 'field': 'run_var', 'scale': {'domain': [-5, 3]}}, 'y': {'type': 'quantitative', 'axis': {'title': 'Crime count per school year'}, 'field': 'violent_count'}}, 'transform': [{'filter': 'datum.run_var >= 0'}]}, {'data': {'values': [{'implement_year': -0.5}]}, 'mark': 'rule', 'encoding': {'x': {'type': 'quantitative', 'field': 'implement_year'}}}, {'data': {'values': [{'implement_year': -0.5}]}, 'mark': {'type': 'text', 'angle': 270, 'dx': -100, 'dy': -5}, 'encoding': {'text': {'value': 'Implementation'}, 'x': {'type': 'quantitative', 'field': 'implement_year'}}}], 'data': {'values': [{'run_var': -5.0, 'violent_count': 0.25582599689280167, 'block_status': 'One over'}, {'run_var': -5.0, 'violent_count': 0.2052693668895006, 'block_status': 'Three over'}, {'run_var': -5.0, 'violent_count': 0.4187349879903923, 'block_status': 'Treated'}, {'run_var': -5.0, 'violent_count': 0.27502295684113864, 'block_status': 'Two over'}, {'run_var': -4.0, 'violent_count': 0.2356539469851442, 'block_status': 'One over'}, {'run_var': -4.0, 'violent_count': 0.16318407960199005, 'block_status': 'Three over'}, {'run_var': -4.0, 'violent_count': 0.38003663003663, 'block_status': 'Treated'}, {'run_var': -4.0, 'violent_count': 0.19342672413793102, 'block_status': 'Two over'}, {'run_var': -3.0, 'violent_count': 0.27031750655403436, 'block_status': 'One over'}, {'run_var': -3.0, 'violent_count': 0.18333333333333332, 'block_status': 'Three over'}, {'run_var': -3.0, 'violent_count': 0.47985347985347987, 'block_status': 'Treated'}, {'run_var': -3.0, 'violent_count': 0.2351831896551724, 'block_status': 'Two over'}, {'run_var': -2.0, 'violent_count': 0.26711331197203614, 'block_status': 'One over'}, {'run_var': -2.0, 'violent_count': 0.1855721393034826, 'block_status': 'Three over'}, {'run_var': -2.0, 'violent_count': 0.45467032967032966, 'block_status': 'Treated'}, {'run_var': -2.0, 'violent_count': 0.22225215517241378, 'block_status': 'Two over'}, {'run_var': -1.0, 'violent_count': 0.2286629769880571, 'block_status': 'One over'}, {'run_var': -1.0, 'violent_count': 0.1808457711442786, 'block_status': 'Three over'}, {'run_var': -1.0, 'violent_count': 0.45375457875457875, 'block_status': 'Treated'}, {'run_var': -1.0, 'violent_count': 0.20770474137931033, 'block_status': 'Two over'}, {'run_var': 0.0, 'violent_count': 0.2149723274104282, 'block_status': 'One over'}, {'run_var': 0.0, 'violent_count': 0.16467661691542287, 'block_status': 'Three over'}, {'run_var': 0.0, 'violent_count': 0.391025641025641, 'block_status': 'Treated'}, {'run_var': 0.0, 'violent_count': 0.18507543103448276, 'block_status': 'Two over'}, {'run_var': 1.0, 'violent_count': 0.22664308871205424, 'block_status': 'One over'}, {'run_var': 1.0, 'violent_count': 0.15623409669211197, 'block_status': 'Three over'}, {'run_var': 1.0, 'violent_count': 0.3131407269338304, 'block_status': 'Treated'}, {'run_var': 1.0, 'violent_count': 0.19234943027672274, 'block_status': 'Two over'}, {'run_var': 2.0, 'violent_count': 0.23587570621468926, 'block_status': 'One over'}, {'run_var': 2.0, 'violent_count': 0.15710560625814862, 'block_status': 'Three over'}, {'run_var': 2.0, 'violent_count': 0.37081203861442363, 'block_status': 'Treated'}, {'run_var': 2.0, 'violent_count': 0.17813226985709538, 'block_status': 'Two over'}, {'run_var': 3.0, 'violent_count': 0.2465753424657534, 'block_status': 'One over'}, {'run_var': 3.0, 'violent_count': 0.181640625, 'block_status': 'Three over'}, {'run_var': 3.0, 'violent_count': 0.3736372646184341, 'block_status': 'Treated'}, {'run_var': 3.0, 'violent_count': 0.18986568986568986, 'block_status': 'Two over'}]}, 'height': 400, 'resolve': {'scale': {'color': 'independent'}}, 'width': 600, '$schema': 'https://vega.github.io/schema/vega-lite/v2.4.3.json'};
var embed_opt = {"mode": "vega-lite"};vegaEmbed("#did_figure_violent", spec, embed_opt)
      .catch(console.error);
    </script>
    